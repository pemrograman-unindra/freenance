@startuml Sequence Diagram - Generate Laporan
autonumber

actor "Pekerja Lepas" as User
boundary "ReportUI" as UI <<boundary>>
control "ReportService" as Service <<control>>
entity "Database" as DB <<entity>>

User -> UI: Membuka menu laporan
activate UI
UI --> User: Menampilkan pilihan laporan
deactivate UI

User -> UI: Pilih jenis laporan
User -> UI: Input parameter filter
User -> UI: Klik generate

activate UI
UI -> Service: generate
activate Service

Service -> DB: Query ke DB
activate DB
DB --> Service: Return data dari DB
deactivate DB

Service -> Service: Kalkulasi analitik:\n- Asset & Liability (real vs budget)\n- Income & Expense (real vs budget)\n- Margin & Net Worth

Service --> UI: Format data untuk tampilan
deactivate Service

UI --> User: Menampilkan laporan
deactivate UI

opt User ingin cetak/export
    User -> UI: Klik cetak/export
    activate UI
    UI -> UI: Generate PDF/Excel
    UI --> User: Download file
    deactivate UI
end

@enduml
